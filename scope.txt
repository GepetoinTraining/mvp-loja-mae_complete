
üöÄ ESCOP√ÉO DO MVP  -  Loja da M√£e do Pedro

1. üß≠ Autentica√ß√£o e Pap√©is
Funcionalidades:
   oo    Login local (usu√°rio/senha)
   oo    Cria√ß√£o de novos usu√°rios pelo Admin
   oo    Gera√ß√£o autom√°tica de usu√°rio/senha para cliente que fecha pedido
Pap√©is com permiss√£o segmentada:
   oo    Admin (sua m√£e)
   oo    Vendedor
   oo    Comprador
   oo    Financeiro
   oo    Cliente final (apenas leitura do status do pedido)
Entidades:
   oo    User { id, name, email, role, passwordHash }
   oo    Session (NextAuth v5 com Prisma)
Notas t√©cnicas:
   oo    middleware.ts com withAuth
   oo    Custom hook useHasPermission(role[])

2. üíº CRM e Pr√©-Or√ßamento (Vendedor)
Funcionalidades:
   oo    Cria√ß√£o de leads
   oo    Gest√£o de clientes comuns e cliente master com subclientes
   oo    Calend√°rio de visitas (com bloqueio de hor√°rios)
   oo    Pr√©-or√ßamento com cards de itens (sem c√°lculo ainda)
Entidades:
   oo    Cliente
   oo    ClienteMaster --> Cliente[]
   oo    Lead, Visita
   oo    CalendarioVendedor
Notas t√©cnicas:
   oo    Integra√ß√£o opcional com Google Calendar (futuro)
   oo    Cada produto do pr√©-or√ßamento segue estrutura de input de dados com base no tipo (tipoProduto: "cortina" | "persiana" | ...)

3. üßÆ Or√ßamento com IA e Aprova√ß√£o
Funcionalidades:
   oo    Envio dos dados ao backend --> c√°lculo via toolkit (Python ou TS)
   oo    Gera√ß√£o de cards de produto com pre√ßos, imagens e IA (prompt copy-paste)
   oo    Gera√ß√£o de PDF simples ou de apresenta√ß√£o
   oo    QR code Pix com desconto + link para contraproposta
   oo    Valida√ß√£o de regras de neg√≥cio antes de permitir fechamento
Entidades:
   oo    Orcamento
   oo    ItemOrcamento
   oo    RegraNegocio
   oo    Contraproposta
Notas t√©cnicas:
   oo    Renderizador de PDF (react-pdf)
   oo    Gera√ß√£o de QR Code (qrcode.react)
   oo    Valida√ß√£o com Zod
   oo    Descontos manuais --> se ultrapassam regras --> alerta para admin aprovar

4. üèó Compras, Produ√ß√£o e Estoque
Funcionalidades:
   oo    Checagem autom√°tica de estoque
   oo    Or√ßamento autom√°tico com fornecedores padr√£o
   oo    Impress√£o de ordem de produ√ß√£o (PDF)
   oo    Integra√ß√£o leve com estoque (entrada manual via checagem de nota)
   oo    Checklist final de instala√ß√£o
Entidades:
   oo    Fornecedor, Estoque, PedidoCompra, ItemCompra
   oo    OrdemProducao
   oo    ChecklistInstalacao
Notas t√©cnicas:
   oo    Integra√ß√£o com XML de nota fiscal para abastecer estoque
   oo    Painel do comprador para avan√ßar etapas da produ√ß√£o

5. üí∞ Financeiro e SEFAZ
Funcionalidades:
   oo    Contas a pagar (via leitura de XML)
   oo    Contas a receber (ap√≥s fechamento do or√ßamento)
   oo    Gera√ß√£o de boleto (manual no in√≠cio)
   oo    Lembretes por e-mail
   oo    Gr√°ficos e listas de cobran√ßas, vencimentos e inadimplentes
Entidades:
   oo    ContaPagar, ContaReceber
   oo    NotaFiscalEmitida, NotaFiscalRecebida
Notas t√©cnicas:
   oo    Script SEFAZ rodando 4x ao dia
   oo    Push notification futura para lembretes internos

6. üìä Dashboards e Relat√≥rios
Funcionalidades:
   oo    Dashboard por perfil:
         oo          Vendedor: leads, propostas, comiss√µes, metas
         oo          Admin: BI com gr√°ficos combinados
   oo    Relat√≥rios mensais em CSV e PDF
   oo    Exporta√ß√£o por data, vendedor ou cliente
Entidades:
   oo    Comissao, Meta, DashboardData, Relatorio
Notas t√©cnicas:
   oo    Charts com recharts
   oo    Exporta√ß√µes com papaparse (CSV) e react-pdf

7. üß± Infraestrutura e Deploy
Funcionalidades:
   oo    WebApp com estrutura PWA
   oo    Sync entre dispositivos (IndexedDB + sincroniza√ß√£o)
   oo    Instala√ß√£o local ou via subdom√≠nio lojadamae.com
Notas t√©cnicas:
   oo    Deploy na Vercel + op√ß√£o de exporta√ß√£o como PWA (next-pwa)
   oo    IndexedDB via idb-keyval
   oo    Persist√™ncia offline + sync no login (token v√°lido --> atualiza)
üìã Entregas por Fase (sugest√£o)
                                     Fase
                                   Objetivo
1
Auth + CRM + Calend√°rio + Pr√©-Or√ßamento
2
Or√ßamento + IA + PDF + Regra de Neg√≥cio
3
Compras + Produ√ß√£o + Estoque + Checklist
4
Financeiro + SEFAZ XML + Cobran√ßa/Recibo
5
Dashboards + Relat√≥rios + Exporta√ß√£o
6
Deploy + Instala√ß√£o PWA + Testes finais

